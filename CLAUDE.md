# Animal Fight - 動物守護者桌遊設計專案

## 專案概述
兒童桌遊，支援兩種遊戲模式：
- **合作闘關**：家長當 DM，2 位孩子合作闖關（RPG 風格）
- **動物大對決**：1v1 淘汰賽，快節奏對戰

適合 6-12 歲兒童。Print & Play 自製桌遊格式。

## 專案結構
```
animal-fight/
├── .gitignore
├── CLAUDE.md                 # 專案架構與技術決策
├── README.md                 # 環境設置與快速開始
├── archive/
│   ├── v1/                   # v1 數值封存（歷史備份）
│   └── docs/                 # 歷史設計文件
│       ├── attribute-review.md       # 屬性審查報告
│       └── 260115-animal-final.md    # 第三波 19 隻設計過程
├── card/                     # 卡片相關檔案
│   ├── final_cards.html      # A4 全頁列印版（84 張動物卡，v2.5 數值）
│   ├── generate_from_jsonl.py      # 圖片批次生成腳本
│   ├── .env.example          # API Key 範本
│   ├── images/               # 動物圖片 + icon（84+6 張）
│   └── img-prompt/           # 圖片生成 prompt
│       ├── prompt-guidelines.md      # Prompt 撰寫指南與審核條件
│       ├── animal-ai-prompts.md      # 第一波 10 隻動物 prompt
│       ├── animal-ai-prompts2.md     # 第二波 6 隻動物 prompt
│       ├── animal-ai-prompts-3.md    # 第三波 19 隻動物 prompt
│       ├── animal-prompts-api.jsonl  # 第一波 JSONL（API 用）
│       ├── animal-prompts-api-3.jsonl # 第三波 JSONL（API 用）
│       ├── animal-ai-prompts-4.md    # 第四波 13 隻動物 prompt
│       ├── animal-prompts-api-4.jsonl # 第四波 JSONL（API 用）
│       ├── animal-ai-prompts-5.md    # 第五波 20 隻動物 prompt
│       ├── animal-prompts-api-5.jsonl # 第五波 JSONL（API 用）
│       ├── animal-ai-prompts-6.md    # 第六波 16 隻動物 prompt
│       ├── animal-prompts-api-6.jsonl # 第六波 JSONL（API 用）
│       ├── animal-ai-prompts-7.md    # 第七波 14 隻動物 prompt
│       └── animal-prompts-api-7.jsonl # 第七波 JSONL（API 用）
├── docs/
│   ├── prompt.txt            # 原始需求 prompt
│   ├── review-result.md      # 審查報告
│   ├── attributes.md      # v2.5 完整屬性（數值+判斷原則+特殊能力設計）
│   ├── 260118-animal-wave4.md # 第四波 13 隻新動物設計
│   ├── 260209-animal-wave6.md # 第六波 16 隻新動物設計
│   ├── 260210-animal-wave7.md # 第七波 14 隻新動物設計（Creature Cases）
│   └── design-versions/      # 設計迭代版本（6 個）
│       ├── animal-cl.md      # Claude v1
│       ├── animal-ge.md      # Gemini v1
│       ├── animal-gpt.md     # GPT v1 (規格書)
│       ├── animal-cl-2.md    # Claude v2
│       ├── animal-cla-2.md   # Claude 整合優化版 (最佳)
│       └── animal-gpt-2.md   # GPT v2
├── game/
│   ├── rulebook.md           # 合作闘關規則書
│   └── battle-rules.md       # 動物大對決淘汰賽規則（v2.4 數值）
└── sim/                      # 對戰模擬器
    ├── battle_sim_v3.py      # 原規則模擬（35 隻動物，各自擲骰）
    ├── battle_sim_v4.py      # 原規則模擬（48 隻動物，3 強循環賽）
    ├── battle_sim_v5.py      # 新規則模擬（64 隻動物，骰 6 重骰＋條件加分）⚠️ 尚未更新至 68 隻
    ├── battle_sim_shared_dice.py  # 共用骰子規則模擬（35 隻動物）
    └── results/              # 模擬結果（v3/v4/v5）
```

## 技術決策

### 卡片設計
- **5 屬性**：力量、速度、攻擊、防禦、智慧（骰子 1-5）
- **骰子 6**：特殊能力觸發，顯示加成 icon 和分數
- **特殊能力加成**：固定 +4 分，分配到 2-3 個屬性

### 數值系統分歧
- 合作闘關（rulebook.md）：v1 數值系統（天賦為單一分數 8-12，總和 34-39）
- 動物大對決（battle-rules.md）：v2.5 數值系統（天賦為 +4 分配，總和 11-33）
- 兩模式獨立運作，待實際遊玩測試後再決定是否統一

### 動物數值設計 SOP（5 步）
1. **選定動物** → 由人決定，AI 不介入
2. **五維數值設計** → `docs/attributes.md` §1-§5（各屬性判斷邏輯 + 分數標準）
3. **特殊能力設計** → `docs/attributes.md` §7（動態特徵 + 視覺化可行性 + 姿態辨識度 + +4 分配 + 命名規範）
4. **五維重疊比對** → `docs/attributes.md` §9（差異分數 ≤3 必須調整）
5. **3 Agent 並行審核** → `docs/attributes.md` §8（A=科學合理性 / B=特殊能力設計 / C=全局平衡與辨識度）

### Prompt 生產 SOP（6 步）
1. **特殊能力設計** → `docs/attributes.md` §7（視覺化可行性 + 姿態辨識度 + 命名規範）
2. **撰寫 Prompt** → `card/img-prompt/prompt-guidelines.md` §1-§6（模板 + 動作轉換 + 風格後綴）
3. **3 Agent 並行審核** → `prompt-guidelines.md` §3 + §7-§12 + §13（11 項審核清單 + 審核分工）
4. **產出 .md + .jsonl** → `prompt-guidelines.md` §14（JSONL 轉換規範）
5. **批次 API 呼叫** → `card/generate_from_jsonl.py`
6. **圖片驗收 + 整合 HTML** → `card/final_cards.html`

### 已建立動物（第一波 16 張）

| 動物 | 力量 | 速度 | 攻擊 | 防禦 | 智慧 | 總和 | 特殊加成 |
|------|:----:|:----:|:----:|:----:|:----:|:----:|----------|
| 非洲獅 | 7 | 6 | 8 | 4 | 5 | 30 | 力+2, 攻+2 |
| 非洲象 | 9 | 2 | 3 | 8 | 8 | 30 | 攻+1, 防+3 |
| 大猩猩 | 8 | 4 | 4 | 5 | 9 | 30 | 力+1, 防+2, 速+1 |
| 灣鱷 | 8 | 3 | 9 | 7 | 2 | 29 | 力+2, 防+2 |
| 蜜獾 | 5 | 4 | 6 | 7 | 6 | 28 | 防+3, 智+1 |
| 蘇門答臘虎 | 7 | 5 | 8 | 4 | 4 | 28 | 力+1, 攻+2, 智+1 |
| 海豚 | 4 | 7 | 3 | 4 | 8 | 26 | 智+2, 防+2 |
| 科摩多龍 | 6 | 3 | 7 | 6 | 4 | 26 | 攻+1, 防+3 |
| 獵豹 | 4 | 9 | 6 | 2 | 4 | 25 | 攻+1, 防+1, 速+2 |
| 北極狐 | 3 | 7 | 3 | 4 | 7 | 24 | 速+1, 防+1, 智+2 |
| 紅袋鼠 | 5 | 6 | 5 | 4 | 3 | 23 | 力+1, 速+1, 攻+2 |
| 遊隼 | 2 | 9 | 5 | 1 | 4 | 21 | 防+2, 攻+1, 智+1 |
| 黑斑羚 | 3 | 8 | 2 | 3 | 3 | 19 | 速+2, 防+2 |
| 貓頭鷹 | 2 | 5 | 4 | 2 | 6 | 19 | 智+2, 防+1, 速+1 |
| 穿山甲 | 3 | 2 | 1 | 9 | 2 | 17 | 防+2, 速+2 |
| 加拉巴哥象龜 | 3 | 1 | 1 | 9 | 2 | 16 | 防+3, 智+1 |

### 第三波新動物（19 張，已完成設計）

| 動物 | 力 | 速 | 攻 | 防 | 智 | 總和 | 特殊技能 |
|------|:--:|:--:|:--:|:--:|:--:|:----:|----------|
| 鬣狗 | 6 | 6 | 7 | 4 | 6 | 29 | 碎骨利齒 |
| 美洲野牛 | 8 | 6 | 5 | 7 | 3 | 29 | 狂暴衝撞 |
| 山豬 | 6 | 5 | 6 | 6 | 5 | 28 | 豬突猛進 |
| 犛牛 | 8 | 4 | 5 | 7 | 3 | 27 | 高原厚皮 |
| 麋鹿 | 7 | 6 | 5 | 5 | 3 | 26 | 巨角橫掃 |
| 駱駝 | 7 | 5 | 3 | 6 | 3 | 24 | 沙漠耐力 |
| 非洲野犬 | 3 | 7 | 5 | 2 | 6 | 23 | 團隊狩獵 |
| 疣豬 | 5 | 5 | 5 | 4 | 4 | 23 | 獠牙衝撞 |
| 水鹿 | 6 | 6 | 4 | 4 | 3 | 23 | 水中逃脫 |
| 長臂猿 | 4 | 7 | 3 | 2 | 7 | 23 | 樹冠擺盪 |
| 食蟻獸 | 4 | 3 | 5 | 5 | 2 | 19 | 利爪揮擊 |
| 豪豬 | 2 | 2 | 3 | 8 | 3 | 18 | 刺針反擊 |
| 黃鼠狼 | 1 | 7 | 4 | 2 | 4 | 18 | 迅捷突襲 |
| 鴨嘴獸 | 2 | 4 | 5 | 3 | 4 | 18 | 毒刺反擊 |
| 大耳狐 | 2 | 6 | 2 | 2 | 5 | 17 | 巨耳偵測 |
| 狐獴 | 1 | 5 | 2 | 2 | 7 | 17 | 團隊哨兵 |
| 火雞 | 2 | 4 | 2 | 2 | 3 | 13 | 驚嚇飛逃 |
| 樹懶 | 3 | 1 | 2 | 5 | 2 | 13 | 完美偽裝 |
| 藍鯨 | 9 | 4 | 2 | 9 | 7 | 31 | 尾鰭重擊 |

> 繪圖 prompt 見 card/img-prompt/animal-ai-prompts-3.md
> 設計過程見 archive/docs/260115-animal-final.md

### 第四波新動物（13 張，已完成）

| 動物 | 力 | 速 | 攻 | 防 | 智 | 總和 | 特殊技能 |
|------|:--:|:--:|:--:|:--:|:--:|:----:|----------|
| 大白鯊 | 7 | 7 | 9 | 5 | 4 | 32 | 致命撕咬 |
| 河馬 | 9 | 4 | 7 | 8 | 3 | 31 | 血盆大口 |
| 北極熊 | 8 | 5 | 8 | 5 | 5 | 31 | 熊掌重擊 |
| 犀牛 | 9 | 4 | 7 | 9 | 2 | 31 | 鋼鐵衝撞 |
| 花豹 | 6 | 7 | 8 | 3 | 5 | 29 | 伏擊撲殺 |
| 灰狼 | 5 | 7 | 6 | 4 | 7 | 29 | 狼群圍獵 |
| 狼獾 | 5 | 5 | 7 | 6 | 5 | 28 | 無畏死鬥 |
| 麝牛 | 7 | 4 | 5 | 7 | 4 | 27 | 頂角對撞 |
| 長頸鹿 | 7 | 6 | 5 | 5 | 3 | 26 | 長頸橫掃 |
| 蟒蛇 | 8 | 2 | 7 | 5 | 2 | 24 | 纏繞絞殺 |
| 人 | 3 | 4 | 2 | 1 | 9 | 19 | 工具大師 |
| 鵜鶘 | 3 | 5 | 3 | 2 | 4 | 17 | 巨嘴兜捕 |
| 丹頂鶴 | 2 | 5 | 3 | 2 | 5 | 17 | 仙鶴振翅 |

> 設計文件見 docs/260118-animal-wave4.md
> 繪圖 prompt 見 card/img-prompt/animal-ai-prompts-4.md

### 第五波新動物（20 張，已完成設計）

| 動物 | 力 | 速 | 攻 | 防 | 智 | 總和 | 特殊技能 |
|------|:--:|:--:|:--:|:--:|:--:|:----:|----------|
| 虎鯨 | 8 | 6 | 8 | 4 | 7 | 33 | 翻浪獵殺 |
| 鴕鳥 | 5 | 8 | 5 | 3 | 3 | 24 | 鐵腿飛踢 |
| 家豬 | 6 | 3 | 3 | 5 | 7 | 24 | 鐵鼻猛拱 |
| 猞猁 | 4 | 6 | 6 | 3 | 4 | 23 | 靜步飛撲 |
| 雪豹 | 5 | 5 | 6 | 3 | 4 | 23 | 雪嶺伏殺 |
| 白頭海鵰 | 3 | 7 | 6 | 2 | 5 | 23 | 鷹爪俯衝 |
| 電鰻 | 4 | 4 | 7 | 4 | 3 | 22 | 高壓電擊 |
| 雪鴞 | 2 | 7 | 4 | 2 | 6 | 21 | 無聲獵殺 |
| 乳牛 | 7 | 3 | 2 | 5 | 4 | 21 | 蠻力衝撞 |
| 擬態章魚 | 2 | 4 | 3 | 3 | 8 | 20 | 千面擬態 |
| 雲豹 | 3 | 5 | 6 | 2 | 4 | 20 | 長牙穿刺 |
| 海獺 | 3 | 4 | 2 | 4 | 7 | 20 | 石擊破殼 |
| 浣熊 | 2 | 4 | 3 | 3 | 7 | 19 | 巧手偷襲 |
| 蠍子 | 1 | 3 | 7 | 5 | 2 | 18 | 毒尾螫刺 |
| 皇帝企鵝 | 3 | 3 | 2 | 4 | 5 | 17 | 極地潛行 |
| 犰狳 | 2 | 3 | 1 | 7 | 3 | 16 | 鐵甲捲球 |
| 綠鬣蜥 | 2 | 4 | 3 | 3 | 3 | 15 | 鐵尾鞭擊 |
| 孔雀 | 2 | 3 | 2 | 3 | 4 | 14 | 華羽開屏 |
| 箭毒蛙 | 1 | 3 | 1 | 7 | 2 | 14 | 劇毒觸膚 |
| 蘭花螳螂 | 1 | 2 | 4 | 2 | 2 | 11 | 花影伏擊 |

> 繪圖 prompt 見 card/img-prompt/animal-ai-prompts-5.md

### 第六波新動物（16 張，已完成設計）

| 動物 | 力 | 速 | 攻 | 防 | 智 | 總和 | 特殊技能 |
|------|:--:|:--:|:--:|:--:|:--:|:----:|----------|
| 棕熊 | 8 | 4 | 7 | 7 | 5 | 31 | 熊抱鎖殺 |
| 美洲豹 | 7 | 5 | 8 | 4 | 5 | 29 | 碎顱咬殺 |
| 海象 | 8 | 2 | 5 | 8 | 4 | 27 | 巨牙猛刺 |
| 野馬 | 7 | 7 | 4 | 4 | 5 | 27 | 後蹄連踢 |
| 斑馬 | 6 | 7 | 4 | 3 | 3 | 23 | 亂紋迷蹤 |
| 大熊貓 | 6 | 3 | 3 | 6 | 4 | 22 | 鐵掌劈竹 |
| 牧羊犬 | 3 | 7 | 3 | 2 | 7 | 22 | 牧群戰術 |
| 眼鏡蛇 | 2 | 4 | 8 | 3 | 3 | 20 | 毒牙閃擊 |
| 螳螂蝦 | 1 | 3 | 7 | 4 | 3 | 18 | 音速鐵拳 |
| 兀鷲 | 3 | 5 | 3 | 2 | 5 | 18 | 腐食鐵胃 |
| 羊駝 | 4 | 4 | 2 | 3 | 5 | 18 | 口水飛彈 |
| 臭鼬 | 2 | 3 | 3 | 6 | 4 | 18 | 臭氣沖天 |
| 鈍尾毒蜥 | 2 | 2 | 6 | 5 | 2 | 17 | 鎖口毒咬 |
| 巨嘴鳥 | 2 | 5 | 3 | 2 | 4 | 16 | 彩喙猛啄 |
| 河豚 | 1 | 2 | 1 | 8 | 2 | 14 | 膨脹毒球 |
| 獨角仙 | 1 | 2 | 4 | 5 | 2 | 14 | 鋼角猛頂 |

> 設計文件見 docs/260209-animal-wave6.md
> 繪圖 prompt 見 card/img-prompt/animal-ai-prompts-6.md

### 第七波新動物（14 張，已完成設計，Creature Cases 系列）

全部來自 Netflix《The Creature Cases》，小孩已在節目中認識。

| 動物 | 力 | 速 | 攻 | 防 | 智 | 總和 | 特殊技能 |
|------|:--:|:--:|:--:|:--:|:--:|:----:|----------|
| 象海豹 | 9 | 2 | 4 | 7 | 3 | 25 | 巨鼻怒吼 |
| 紅毛猩猩 | 6 | 2 | 3 | 4 | 9 | 24 | 巧手造物 |
| 鱷龜 | 5 | 2 | 7 | 7 | 2 | 23 | 鋼喙猛咬 |
| 郊狼 | 4 | 6 | 4 | 3 | 6 | 23 | 孤狼巧獵 |
| 啄羊鸚鵡 | 1 | 6 | 5 | 3 | 7 | 22 | 銳喙拆解 |
| 水豚 | 4 | 5 | 2 | 4 | 5 | 20 | 潛水隱伏 |
| 安地斯神鷲 | 4 | 6 | 3 | 3 | 4 | 20 | 巨翼蔽天 |
| 小貓熊 | 2 | 5 | 1 | 3 | 6 | 17 | 驚立威嚇 |
| 狼蛛 | 1 | 3 | 5 | 4 | 3 | 16 | 刺毛飛射 |
| 負鼠 | 1 | 4 | 2 | 5 | 4 | 16 | 翻肚裝死 |
| 針鼴 | 3 | 2 | 1 | 6 | 4 | 16 | 鑽地隱刺 |
| 裸鼴鼠 | 1 | 2 | 3 | 4 | 5 | 15 | 鐵齒穿地 |
| 喙頭蜥 | 2 | 2 | 3 | 5 | 3 | 15 | 鋸齒裂咬 |
| 糞金龜 | 1 | 2 | 2 | 4 | 2 | 11 | 滾球巨力 |

> 設計文件見 docs/260210-animal-wave7.md

### 待建立動物 — 後續擴充（16 隻）

| 動物 |
|------|
| 座頭鯨、刺蝟、大西洋劍魚、綠巨人蜻蜓、北極兔 |
| 蜂鳥★、角鵰、渡鴉、黑猩猩、變色龍 |
| 海龜、蝙蝠★、金剛鸚鵡、水母、無尾熊、食人魚 |

> ★ 也出現在 Creature Cases 中
> 優先順序未定，視實際需求決定

## 遊戲模式

### 合作闘關（rulebook.md）
- 判定：`2d6 + 屬性數值`
- 難度：DC 10（優勢）/ 12（標準）/ 14（劣勢）
- 生命：共享 5 愛心
- 勝利：累積 5 前進標記 → 終局

### 動物大對決（battle-rules.md）
- 賽制：淘汰賽，每輪 1 戰定勝負（進階：3 戰 2 勝）
- 擲骰：雙方各擲 2d6，比總和
- 骰到相同：該屬性 ×2
- 骰到 6：重骰＋觸發 1 次天賦加分（僅加骰面命中的屬性加成）
- 連續骰 6：每次都重骰＋再觸發 1 次（可累加）
- 平手：加賽

## 當前狀態
- [x] 需求分析
- [x] 多版本設計
- [x] 審查評分
- [x] 選定最佳版本
- [x] 專案結構整理
- [x] A4 列印版 HTML（final_cards.html）
- [x] 圖片生成腳本（generate_from_jsonl.py）
- [x] 動物大對決規則（battle-rules.md）
- [x] 卡片改版：骰子6 顯示特殊加成
- [x] 數值平衡調整：總和 23-28、屬性分布優化
- [x] AI 圖片生成（16 張動物 + 6 張 icon，via Codex CLI + gpt-image-1.5）
- [x] 6 張新動物天賦技能設計
- [x] 對戰模擬器（35 隻動物，原規則 + 共用骰子規則）
- [x] v2.1 數值調整（科學合理性優先）
- [x] 第三波 19 隻新動物設計（屬性 + 技能 + 繪圖 prompt）
- [x] Prompt 撰寫指南（prompt-guidelines.md）
- [x] 第三波 AI 圖片生成（19 張）
- [x] final_cards.html 整合 35 張動物卡
- [x] 第四波 13 隻新動物設計（屬性 + 技能）
- [x] 第四波繪圖 prompt
- [x] 第四波 AI 圖片生成
- [x] final_cards.html 整合 48 張動物卡
- [x] 對戰模擬器 v4（48 隻動物，3 強循環賽）
- [x] 對戰模擬器 v5（64 隻動物，新版骰 6 規則）
- [x] 第五波 20 隻新動物設計（屬性 + 技能，含 4 隻補充）
- [x] 第五波繪圖 prompt
- [x] 第五波 AI 圖片生成（20 張，含 4 隻補充）
- [x] final_cards.html 整合 68 張動物卡
- [x] 第六波 16 隻新動物設計（屬性 + 技能）
- [x] 第六波繪圖 prompt
- [x] 第六波 AI 圖片生成（16 張）
- [x] final_cards.html 整合 84 張動物卡
- [x] 第七波 14 隻新動物設計（屬性 + 技能，Creature Cases 系列）
- [x] 第七波繪圖 prompt
- [ ] 第七波 AI 圖片生成（14 張）
- [ ] final_cards.html 整合 98 張動物卡
- [ ] 印刷測試
- [ ] 實際遊玩測試

## 對戰模擬結果（64 隻動物淘汰賽 v5）⚠️ 尚未納入補充 4 隻

淘汰賽：64 → 32 → 16 → 8 → 4 → 2 → 冠軍（標準單淘汰）
100,000 次模擬，新規則（骰 6 重骰＋條件加分）

| 排名 | 動物 | 總和 | 1v1 勝率 | 四強機率 | 冠軍率 |
|:----:|------|:----:|--------:|--------:|------:|
| 1 | 虎鯨 | 33 | 82.17% | 33.43% | 15.17% |
| 2 | 大白鯊 | 32 | 78.52% | 26.25% | 9.63% |
| 3 | 北極熊 | 31 | 76.31% | 21.66% | 6.86% |
| 4 | 非洲獅 | 30 | 74.12% | 18.42% | 5.06% |
| 5 | 河馬 | 31 | 74.02% | 19.95% | 6.50% |
| 6 | 大猩猩 | 30 | 72.91% | 17.75% | 5.00% |

> 詳細數據見 `sim/results/v5_*.csv`
> 舊版結果見 `sim/results/v4_*.csv`、`sim/results/original_rules_*.csv`

## 卡片實體製作
- **討論文件**：[`docs/plans/2026-02-10-card-size-production.md`](docs/plans/2026-02-10-card-size-production.md)
- **狀態**：討論中，待決定尺寸與製作方式
- **初步方向**：Tarot 尺寸（70×120mm）+ 卡套法

## 後續擴充（不納入 MVP）
- 裝備卡
- 狀態效果
- 更多動物（後續擴充 16 隻待建）
- Boss 專屬招式表
