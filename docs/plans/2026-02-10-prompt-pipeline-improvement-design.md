# Prompt 生產流程改善方案

> **建立日期**：2026-02-10
> **範圍**：上游（特殊能力設計原則）＋ 下游（Prompt 撰寫指南）
> **根據**：第五波（20 隻，12 隻需修正）＋ 第六波（16 隻，6+1 隻需修正）審核數據

---

## 一、問題追溯總覽

| # | 問題類別 | 案例數 | 上游有責？ | 典型案例 |
|---|---------|:-----:|:---------:|---------|
| 1 | 顏色/材質描述在線稿中無效 | 5 | 否 | 箭毒蛙 `vivid`、獨角仙 `glossy` |
| 2 | 姿態/輪廓與現有動物重疊 | 5 | **是** | 雪豹 vs 花豹、白頭海鵰 vs 遊隼 |
| 3 | AI 無法渲染抽象/不可見概念 | 3 | 部分 | 棕熊 `invisible target`、螳螂蝦 `impact burst lines` |
| 4 | 場景/互動物件過於複雜 | 4 | 部分 | 虎鯨冰上獵物、蘭花螳螂花朵背景 |
| 5 | 構圖方向問題（直幅/極端比例） | 2 | 否 | 猞猁/雲豹垂直動作 → 1024×1536 |
| 6 | 兒童適性（恐怖/血腥內容） | 2 | **是** | 美洲豹「碎顱咬殺」→ 人類頭骨 |

---

## 二、上游修正：特殊能力設計原則（attributes.md §7）

### 修正 A：新增「視覺化可行性」檢查

**位置**：「動態特徵選擇」段落之後，新增子段落

```markdown
## 視覺化可行性檢查

設計特殊能力時，必須確認該動作能在**單張靜態線稿**中呈現。

### 檢查口訣
> 「這個動作，一張塗色頁畫得出來嗎？」

### 三項檢查

| 檢查項目 | 不合格範例 | 修正方向 |
|----------|-----------|---------|
| **動物自身能傳達** | 棕熊環抱不可見目標 | 改為雙臂舉起內彎的姿態，不需對象 |
| **單一瞬間能表達** | 連續翻滾、多段連擊 | 選擇最具代表性的單一頂點瞬間 |
| **不依賴外部物件** | 蘭花螳螂需要花朵背景 | 讓動物自身輪廓就像花瓣 |

### 特殊情況：不可見力量

電流、超音波、毒液等不可見力量，必須有**身體姿態代理**：
- ✅ 眼鏡蛇：張嘴露牙 + 頸部展開（毒牙閃擊的姿態代理）
- ✅ 電鰻：身體弓起 + 尾部纏繞（高壓電擊的姿態代理）
- ❌ 海豚：僅描述「超音波圓環」（無姿態代理）
```

### 修正 B：新增「兒童適性」到命名避免事項

**位置**：命名規範「避免事項」表格新增一列

```markdown
| 血腥意象 | 兒童受驚、AI 生成不適畫面 | 「碎顱咬殺」→「鋼顎碎殼」 |
```

**規則**：四字命名中不得含有人體部位詞（顱、骨、血、肉）或暴力動詞（撕裂、噬、碎顱），以避免 AI 生成人類相關恐怖畫面。

### 修正 C：新增「姿態辨識度」設計步驟

**位置**：「動態特徵選擇」段落新增

```markdown
## 姿態辨識度比對

設計完畢後，列出同類動物（同科或相似體型），比對預期視覺姿態：

| 比對項目 | 標準 |
|----------|------|
| 動作類型 | 不與同科動物使用相同動作（如都是「撲殺」） |
| 身體方向 | 不與相似體型動物使用相同構圖角度 |
| 互動物件 | 若需物件，必須是該動物獨有的（如美洲豹咬龜殼） |

### 範例

| 動物 | 初始構想 | 重疊對象 | 修正後 |
|------|---------|---------|-------|
| 雪豹 | 飛撲獵殺 | 花豹伏擊撲殺 | 改為伏低蹲姿，強調超長粗尾 |
| 白頭海鵰 | 垂直俯衝 | 遊隼千里眼俯衝 | 改為水面低掠抓魚 |
| 犰狳 | 捲球防禦 | 穿山甲捲成球 | 強化矩形甲片質感區隔 |
```

---

## 三、下游修正：Prompt 撰寫指南（prompt-guidelines.md）

### 現有結構（6 個章節，保留不動）

1. Prompt 結構模板
2. 技能→動作轉換指南
3. 審核清單
4. 良好範例對照表
5. 常見錯誤
6. 風格後綴（固定）

### 新增章節（6 個，對應 6 類問題）

---

#### §7 線稿禁用詞彙表（對應問題 #1：顏色/材質）

```markdown
## 7. 線稿禁用詞彙

黑白線稿風格中，以下詞彙無效或會產生矛盾結果：

| 禁用類別 | 禁用詞彙 | 替代方案 |
|----------|---------|---------|
| 顏色 | vivid, colorful, bright, golden, red, blue | 用花紋描述：`bold pattern`, `geometric markings` |
| 光澤 | glossy, shiny, iridescent, glowing | 用質感描述：`smooth`, `textured`, `rough` |
| 透明 | translucent, transparent, see-through | 用結構描述：`thin membrane`, `delicate wings` |
| 陰影 | shadow, dark patches, silhouette | 用線條描述：`bold outline`, `thick lines` |

### 自檢方式
> 遮住所有顏色/材質詞，剩下的描述是否仍能辨識這隻動物？若不能，需補強結構特徵。
```

---

#### §8 動物姿態重疊比對（對應問題 #2：輪廓重疊）

```markdown
## 8. 姿態重疊比對

撰寫 prompt 前，必須列出「最可能撞姿態」的現有動物，確認視覺區隔。

### 高風險重疊群組

| 群組 | 成員 | 區隔策略 |
|------|------|---------|
| 大貓撲殺 | 非洲獅、花豹、猞猁、雪豹、雲豹、美洲豹 | 各自不同動作：吼叫/撲殺/草叢躍出/蹲伏/樹上俯撲/咬龜殼 |
| 猛禽俯衝 | 遊隼、白頭海鵰、雪鴞、兀鷲 | 垂直俯衝/水面低掠/水平滑翔/地面張嘴 |
| 護甲捲球 | 穿山甲、犰狳 | 鱗片重疊/矩形甲片帶狀紋理 |
| 蛇類攻擊 | 蟒蛇、眼鏡蛇 | 纏繞絞殺/展頸噴毒 |

### 比對流程
1. 找出同科或相似體型的已有動物
2. 比較動作類型（撲/衝/咬/站）和身體方向（水平/垂直/蜷縮）
3. 若重疊 → 必須改用不同動作或角度
```

---

#### §9 AI 可渲染性規則（對應問題 #3：抽象概念）

```markdown
## 9. AI 可渲染性規則

AI 圖像生成器的能力邊界：只能畫「看得見的東西」。

### 禁止描述

| 類型 | 禁用範例 | 原因 |
|------|---------|------|
| 不可見物體 | `invisible target`, `unseen prey` | AI 會忽略或生成懸空肢體 |
| 漫畫效果 | `impact burst lines`, `speed lines`, `shock waves` | AI 處理不一致，可能變成隨機線條 |
| 抽象概念 | `pure rage`, `ultimate power`, `aura of fear` | 無法轉化為視覺元素 |

### 不可見力量的處理方式

將不可見力量轉化為「身體姿態 + 可見副產物」：

| 不可見力量 | ❌ 不要寫 | ✅ 改為 |
|-----------|----------|--------|
| 電流 | `electricity crackling` | 身體弓起蓄力的姿態 |
| 超音波 | `sound waves radiating` | 張嘴 + 頭部傾斜的偵測姿態 |
| 毒液 | `venom invisible in bloodstream` | 張嘴露牙 + 液滴滴落 |
| 臭氣 | `smell cloud` | 尾巴高舉 + 噴射線條（方向線可接受） |

### 允許的效果線
- ✅ `motion blur lines`（動態模糊線）— 表達速度
- ✅ `spray lines`（噴射方向線）— 表達噴射方向
- ✅ `dust kicking up`（揚塵）— 表達地面衝擊
- ❌ `impact burst lines`（衝擊爆裂線）— 漫畫效果
- ❌ `shock wave rings`（衝擊波環）— 過於抽象
```

---

#### §10 場景複雜度限制（對應問題 #4：場景/物件）

```markdown
## 10. 場景複雜度限制

### 核心規則：動物是唯一主角

| 允許 | 限制 | 禁止 |
|------|------|------|
| 動物自身身體 | 1 個簡單互動物件 | 完整場景/背景 |
| 姿態 + 表情 | 物件必須有明確輪廓 | 其他動物作為獵物 |
| 自身產出物（唾液、刺） | 物件面積 < 動物的 1/3 | 模糊物件（`food`, `prey`） |

### 互動物件的選用條件

若技能需要外部物件才能傳達（如美洲豹的咬碎能力），物件必須滿足：

1. **具體明確**：`turtle shell`（有明確形狀）而非 `food`（模糊）
2. **兒童友善**：不會生成恐怖或血腥畫面
3. **該動物獨有**：能強化辨識度（美洲豹是唯一能咬碎龜殼的貓科）
4. **視覺簡單**：不超過 1 個物件，輪廓清晰

### 物件使用範例

| 動物 | 物件 | 理由 |
|------|------|------|
| 美洲豹 | 龜殼（有裂紋） | 獨有行為 + 明確輪廓 + 兒童友善 |
| 大熊貓 | 竹子 | 標誌性關聯 + 簡單形狀 |
| 巨嘴鳥 | 樹枝 | 站立支撐 + 不搶焦點 |
| ❌ 虎鯨 | 冰面 + 海豹 | 場景過於複雜 |
| ❌ 蘭花螳螂 | 花朵背景 | 背景搶焦點 |
```

---

#### §11 構圖方向指南（對應問題 #5：直幅問題）

```markdown
## 11. 構圖方向指南

### 目標比例
卡片容器為橫向矩形，圖片必須為 **1:1 正方或橫向**（1024×1024 或 1536×1024），嚴禁直幅。

### 動作方向與構圖的關係

| 動作方向 | 構圖風險 | 處理方式 |
|----------|---------|---------|
| 水平移動（奔跑、飛撲） | ✅ 安全 | 自然橫構圖 |
| 垂直動作（跳躍、俯衝） | ⚠️ 高風險 | 改為斜向或水平變體 |
| 靜態站立 | ✅ 安全 | 自然正方 |
| 蜷縮/捲球 | ✅ 安全 | 自然正方 |

### 垂直動作的橫化技巧

| 原始描述 | 問題 | 修正 |
|----------|------|------|
| `springing upward` | 縱向構圖 | `bursting forward out of tall grass`（水平躍出） |
| `lunging downward from tree` | 縱向構圖 | `lunging diagonally from branch`（斜向撲出） |
| `diving straight down` | 縱向構圖 | `sweeping low over water surface`（水平低掠） |

### 自檢方式
> 想像這個動作的剪影，放進一個橫向矩形框。如果剪影的高度遠大於寬度，就需要調整動作方向。
```

---

#### §12 兒童適性檢查（對應問題 #6：恐怖/血腥）

```markdown
## 12. 兒童適性檢查

目標受眾 6-12 歲，所有畫面必須適合作為塗色頁。

### 禁止內容

| 類別 | 禁止範例 | 原因 |
|------|---------|------|
| 人體部位 | `skull`, `human bones` | AI 可能生成人類骨骼 |
| 血腥場面 | `blood dripping`, `torn flesh` | 不適合兒童 |
| 恐怖表情 | `terrifying`, `horrifying` | 改用 `fierce`, `aggressive` |
| 死亡場景 | `dead prey`, `carcass` | 改為動態攻擊姿勢（無受害者） |

### 安全替代詞

| 不要用 | 改為 |
|--------|------|
| `skull bite` / `crushing skull` | `powerful bite` / `crushing shell` |
| `tearing at flesh/food` | `beak open wide aggressively` |
| `blood` | 完全移除 |
| `killing` / `deadly` | `powerful` / `fierce` |
| `terrifying` | `fierce` / `intense` |

### 物件安全性
若 prompt 包含互動物件，檢查：AI 是否可能將物件渲染為人類相關？
- ❌ `skull` → 可能生成人類頭骨
- ❌ `bone` → 可能生成人類骨頭
- ✅ `turtle shell` → 明確是動物
- ✅ `bamboo` → 明確是植物
```

---

## 四、審核清單更新

現有審核清單（§3）新增 6 項，從 5 項擴充為 11 項：

```markdown
## 3. 審核清單

撰寫完成後，逐項檢查：

### 基本項（原有）
- [ ] **技能對應**：動作是否直接呈現技能名稱的含義？
- [ ] **動態感**：是否有動作進行中的感覺（而非靜態站立）？
- [ ] **特徵辨識**：關鍵外觀特徵是否有強調？
- [ ] **全身可見**：是否為 full body，避免只有頭部特寫？
- [ ] **風格一致**：是否包含完整的風格後綴？

### 新增項
- [ ] **無禁用詞**：是否含有顏色、光澤、透明等線稿無效詞彙？（§7）
- [ ] **姿態不重疊**：是否與現有同類動物的構圖明顯不同？（§8）
- [ ] **AI 可渲染**：所有描述是否都是「看得見」的？無抽象概念？（§9）
- [ ] **場景簡潔**：互動物件是否 ≤1 個且滿足四項條件？（§10）
- [ ] **橫向構圖**：動作剪影是否適合橫向矩形框？（§11）
- [ ] **兒童適性**：是否無血腥、恐怖、人體部位相關描述？（§12）
```

---

## 五、實施計畫

### Step 1：修改 `docs/attributes.md` §7
- 新增「視覺化可行性檢查」子段落
- 新增「兒童適性」到命名避免事項
- 新增「姿態辨識度比對」子段落

### Step 2：修改 `card/img-prompt/prompt-guidelines.md`
- 新增 §7-§12（6 個章節）
- 擴充 §3 審核清單（5→11 項）
- 更新參考文件清單

### Step 3：提交
- 開 branch `chore/prompt-pipeline-v2`
- 單一 commit 包含兩個文件的修改
- Merge to master

---

## 六、預期效果

| 指標 | 現狀 | 目標 |
|------|------|------|
| 第一輪審核通過率 | ~50%（36 隻中 18 隻需修正） | ~80% |
| 上游設計返工 | 美洲豹「碎顱」→「鋼顎碎殼」（事後修正） | 設計階段即過濾 |
| 審核時間 | 每隻 3 agent 各自發現不同問題 | 作者自檢即能攔截大部分問題 |
